<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose Features</title>
    <link rel="stylesheet" href="EVstyle.css">
</head>
<body style="text-align: center; margin-top: 2%;margin-bottom: 2%;margin-left: 5%;margin-right: 5%margin-left: 5%;margin-right: 5%">
    
    <br><br><br><br>
    
    <div >
        <nav>
            <div class="dropdown">
                <div class="power">
                    <button>Power</button>
                    <ul>
                        <li><label><input type="checkbox" name="attributes_car" value="1" id="Low_power" class ="power">Weak</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="2" id="Normal_power" class ="power">Medium</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="3" id="High_power" class ="power">High</label></li>
                    </ul>
                </div>
                
                <div class="drivetrain">
                    <button>Drive Train</button>
                    <ul>
                        <li><label><input type="checkbox" name="attributes_car" value="1" id="drivetrain" class ="drivetrain">AWD</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="2" id="drivetrain" class ="drivetrain">FWD</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="3" id="drivetrain" class ="drivetrain">RWD</label></li>
                    </ul>
                </div>
                
                <div class="formfactor">
                    <button>Form Factor</button>
                    <ul>
                        <li><label><input type="checkbox" name="attributes_car" value="1" id="formfactor" class ="formfactor">Compact</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="2" id="formfactor" class ="formfactor">Hatchback</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="3" id="formfactor" class ="formfactor">Large</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="4" id="formfactor" class ="formfactor">Mid-Size</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="5" id="formfactor" class ="formfactor">Minivan</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="6" id="formfactor" class ="formfactor">Sedan</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="7" id="formfactor" class ="formfactor">Station Wagon<label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="8" id="formfactor" class ="formfactor">Subcompact</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="9" id="formfactor" class ="formfactor">SUV</label></li>
                    </ul>
                </div>
                
                <div class="price">
                    <button>Max Price</button>
                    <ul>
                        <li><label><input type="checkbox" name="attributes_car" value="1" id="price" class ="price">50000</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="2" id="price" class ="price">75000</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="3" id="price" class ="price">100000</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="4" id="price" class ="price">150000</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="5" id="price" class ="price">None</label></li>
                        
                    </ul>
                </div>
                
                <div class="electrictype">
                    <button>Electric Type</button>
                    <ul>
                        <li>Electric<input type="checkbox" name="attributes_car" value="1" id="ev_type" class ="electrictype"></li>
                        <li>Hybrid<input type="checkbox" name="attributes_car" value="2" id="ev_type" class ="electrictype"></li>
                    </ul>
                </div>
                
                <div class="safetyrating">
                    <button>Safety Rating</button>
                    <ul>
                        <li><label><input type="checkbox" name="attributes_car" value="1" id="safety_rating" class ="safetyrating">Only 5</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="2" id="safety_rating" class ="safetyrating">3 and up</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="3" id="safety_rating" class ="safety_rating">Any</label></li>
                    </ul>
                </div>
                
                <div class="range">
                    <button>Range</button>
                    <ul>
                        <li><label><input type="checkbox" name="attributes_car" value="1" id="range" class ="range">0-200KM   </label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="2" id="range" class ="range">200-400KM   </label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="3" id="range" class ="range">400-600KM</label></li>
                        <li><label><input type="checkbox" name="attributes_car" value="4" id="range" class ="range" >600+KM</label></li>
                    </ul>
                </div>
            </div>
        <br><br><br>
         
        
        </nav>
    </div>

    <br><br><br><br><br><br><br><br><br><br><br>
    <div class ="gobackhome"><a class="homebutton" href="index.html" target="_self" rel="nofollow noopener">Back</a></div>
    <div id="brandsbutton" class ="gobrands"><a class="brandsbutton" target="_self" rel="nofollow noopener">Next</a></div>
    
    <script>document.getElementById("brandsbutton").onclick = async function() {
        var checkbox_vals = []
        var checkboxes = document.querySelectorAll('input[type=checkbox]:checked')

        for (var i = 0; i < checkboxes.length; i++) {
            checkbox_vals.push(checkboxes[i].value)
        }
        console.log(checkbox_vals)
        
        const response = await fetch("http://127.0.0.1:5000/", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(checkbox_vals)
        })

        localStorage.setItem("car_data", JSON.stringify(await response.json()));

        window.location.href = 'results.html' // Load results page
    }</script>
</body>
</body>
</html>